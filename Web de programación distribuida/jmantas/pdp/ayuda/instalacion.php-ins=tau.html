<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<!-- 
    Document   : Funciones de MPI
    Created on : 04-abr-2010, 10:02:39
    Author     : Daniel Guerrero Mart�nez, Sergio Rodr�guez Lumley
-->



<html lang="es">
                <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		    <meta name="google-site-verification" content="0DvGanY5lIegMDLM6tZWwbac1BFBH0TaSNDRU_nsfXw" />
                    <!--<base href="http://lsi.ugr.es/jmantas/pdp/" >-->
                    <link rel="shortcut icon" href="../imagenes/iconoweb.ico" type="imagen/x-icon" ><link href="../estilos/estilo_generico/generico.css" type="text/css" rel="stylesheet" title="Light"><title>Web de Programaci&oacute;n Distribuida y Paralela</title>
                    <script src="../scripts/jquery/jquery-1.4.2.min.js" type="text/javascript"></script>
                    <script src="../scripts/jquery/jquery.scrollTo-min.js" type="text/javascript"></script>
                    <script src="../scripts/animacionIndice.js" type="text/javascript"></script><link href="../estilos/estilo_ayuda/ayuda.css" type="text/css" rel="stylesheet">
</head><body><div class="vista" id="cabecera"><div id="temas"><form method="get" action =""><input name="ins" value="tau" type="hidden" ><input name="stylo" value="generico" type="hidden" ><input title="Light theme" id="light" value="generico" type="submit" class=selec> </form><form method="get" action =""><input name="ins" value="tau" type="hidden" ><input name="stylo" value="dark" type="hidden" ><input title="Dark theme" id="dark" value="dark" type="submit" > </form></div><div id="idiomas"><form method="get" action =""><input name="ins" value="tau" type="hidden" ><input name="idioma" value="es" type="hidden" ><input title="Español" id="es" value="es" type="submit" class=selec> </form><form method="get" action =""><input name="ins" value="tau" type="hidden" ><input name="idioma" value="en" type="hidden" ><input title="English" id="en" value="en" type="submit" > </form></div></div><ol id="menu">
	    <li class="menu vista" id="lHome"><a class="enlaceInvisible" title="Volver al inicio" href="../index.php.html">Home</a></li>
            <li class="menu vista" id="lTeoria"><a class="enlaceInvisible" title="Ir al programa de teoria" href="../teoria/teoria.php.html">Ir al programa de teoria</a></li>
            <li class="menu vista" id="lTutorial"><a class="enlaceInvisible" title="Ir a la sección de tutoriales" href="http://lsi.ugr.es/jmantas/pdp/tutoriales/tutoriales.php">Ir a la sección de tutoriales</a></li>
            <li class="menu vista" id="lPractica"><a class="enlaceInvisible" title="Ir al programa de prácticas" href="http://lsi.ugr.es/jmantas/pdp/practicas/practicas.php">Ir al programa de prácticas</a></li>
            <li class="menu vista" id="lAyuda"><a class="enlaceInvisible" title="Consultar ayuda de MPI y OpenMP" href="ayuda.php.html">Consultar ayuda de MPI y OpenMP</a></li>
            <li class="menu vista" id="lProfesorado"><a class="enlaceInvisible" title="Ir a la sección de profesorado" href="http://lsi.ugr.es/jmantas/pdp/profesorado/profesorado.php">Ir a la sección de profesorado</a></li>
        </ol><div class="vista" id="cuerpo"><ol class="indiceInterno" id="indiceInterno" start="0"><li class="h1">Indice de pagina</li><li class="h2"><a href="../index.html#nodivtitlo">1. Instalaci&oacute;n de TAU </a></li><li class="h2"><a href="../index.html#nodivintro">2. Introducci&oacute;n</a></li><li class="h2"><a href="../index.html#requisitos">3. Requerimientos previos a la instalaci&oacute;n</a></li><li class="h2"><a href="../index.html#inst">4. Instalaci&oacute;n</a></li><li class="h2"><a href="../index.html#uso">5. Uso de TAU</a></li><li class="h2"><a href="../index.html#nodivinterfaz">6. Interfaz</a></li></ol><h1 id="nodivtitlo" >Instalaci&oacute;n de TAU <a class="bDescarga" title="Descarga el fichero" href="datos/instalaciones/Instalacion_TAU.pdf">Descarga</a></h1><h1 id="nodivintro" >Introducci&oacute;n</h1><p>TAU es un visualizador de la ejecuci&oacute;n de un programa basado en <span class="funcion"><a href="mpi_ayuda.php.html">MPI</a></span>. Este programa genera la<br />
    informaci&oacute;n necesaria durante la ejecuci&oacute;n para despu&eacute;s poder leerla e interpretarla como texto o<br />
    gr&aacute;ficamente.<br />
<br />
    La p&aacute;gina principal de documentaci&oacute;n, como referencia es:<br />
    </p> <a href="http://www.cs.uoregon.edu/research/tau/home.php">http://www.cs.uoregon.edu/research/tau/home.php</a> <p>En la cual podr&eacute;is encontrar informaci&oacute;n y los enlaces de descarga pertinentes (detallados en este documento tambi&eacute;n, as&iacute; que no deber&iacute;a ser necesaria la ayuda de la p&aacute;gina mencionada).</p><h1 id="requisitos" >Requerimientos previos a la instalaci&oacute;n</h1><div class="contenido"> <ul><li>Ser&aacute; necesario tener instalada una implementaci&oacute;n de <span class="funcion"><a href="mpi_ayuda.php.html">MPI</a></span>, en concreto, para esta asignatura utilizaremos OpenMPI.</li><li>Tener instalada una m&aacute;quina virtual de Java versi&oacute;n 6 o superior (Entorno de ejecuci&oacute;n “jre” y herramientas de desarrollo “jdk”).</li></ul> </div><h1 id="inst" >Instalaci&oacute;n</h1><div class="contenido"><p>El proceso de instalaci&oacute;n es a trav&eacute;s de consola, requiere un uso m&iacute;nimo de consola, aunque pondremos todos los comandos para facilitar la instalaci&oacute;n.<br />
    <br />
    1. Descargar PDT del enlace http://tau.uoregon.edu/pdt.tgz.<br />
    </p> <a href="http://tau.uoregon.edu/pdt.tgz">http://tau.uoregon.edu/pdt.tgz</a> <p>2. Descomprimir el archivo.<br />
    </p> <div class="consola">tar -xvf pdt.tgz</div> <p>3. Ingresamos en la carpeta que se habr&aacute; creado y compilamos el PDT<br />
    </p> <div class="consola">cd pdtoolkit-x.xx<br />
    sudo ./configure<br />
    sudo make<br />
    sudo make install</div> <p>4. Volvemos al directorio anterior.<br />
    </p> <div class="consola">cd ..</div> <p>5. Descargar TAU del enlace <br />
    </p> <a href="http://tau.uoregon.edu/tau.tgz">http://tau.uoregon.edu/tau.tgz</a> <p>6. Descomprimir el archivo.<br />
    </p> <div class="consola">tar -xvf tau.tgz</div> <p>7. Ingresamos en la carpeta que se habr&aacute; creado<br />
    </p> <div class="consola">cd tau-x.xx.x</div> <p>8. Una vez llegamos a este punto hay ciertos datos que debemos recopilar:<br />
    </p> <ul><li>El ejecutable de MPICC (Compilador para <span class="funcion"><a href="mpi_ayuda.php.html">MPI</a></span>), si instalamos desde repositorios la ruta ser&aacute; "/usr/bin/mpicc", sino ser&aacute; "directorio_de_instalaci&oacute;n/mpicc".</li><li>La carpeta de inclusi&oacute;n de cabeceras de <span class="funcion"><a href="mpi_ayuda.php.html">MPI</a></span>, si instalamos desde repositorios la ruta por defecto es "/usr/include/openmpi/", sino, ser&aacute; "directorio_de_instalaci&oacute;n/include/".</li><li>La carpeta de librer&iacute;as de <span class="funcion"><a href="mpi_ayuda.php.html">MPI</a></span>, si instalamos desde repositorios la ruta por defecto ser&aacute; "/usr/lib/openmpi/lib/", en otro caso "directorio_de_instalaci&oacute;n/lib/".</li></ul> <p>9. Si ya hemos recopilado la informaci&oacute;n necesaria, ejecutaremos la configuraci&oacute;n con los	siguientes par&aacute;metros:<br />
<br />
    Si instalamos todo a trav&eacute;s de repositorios (Es necesario especificar correctamente la carpeta de instalaci&oacute;n de java)<br />
    </p> <div class="consola">sudo ./configure -c++=mpiCC -cc=mpicc -mpi -MPITRACE -slog2 -PROFILE -TRACE -openmp -pdt=/&lt;directorio_instalaccion&gt;/pdtoolkit-x.xx -mpiinc=/usr/include/openmpi -mpilib=/usr/lib/openmpi/lib/</div> <p>Si hicimos la instalaci&oacute;n manual, siguiendo nuestro manual de instalaci&oacute;n (con ruta de instalaci&oacute;n "/home/$USER/.openmpi/"), hay que especificar la ruta de instalaci&oacute;n de java.<br />
    </p> <div class="consola">sudo ./configure -c++=mpiCC -cc=mpicc -mpi -MPITRACE -slog2 -PROFILE -TRACE -openmp -pdt=/&lt;directorio_instalaccion&gt;/pdtoolkit-x.xx -mpiinc=/home/$USER/.openmpi/include -mpilib=/home/$USER/.openmpi/lib/</div> <p>10. Instalamos<br />
    </p> <div class="consola">sudo make<br />
    sudo make install</div> <p>11. Exportamos las variables necesarias. No te olvides de sustituir &lt;directorio_instalaci&oacute;n&gt; y &lt;arquitectura&gt; (E.j: x86_64) por lo que corresponda<br />
    </p> <div class="consola">echo 'export PATH=$PATH:&lt;directorio_instalaci&oacute;n&gt;/tau-x.xx.x/&lt;arquitectura&gt;/bin' &gt;&gt; ~/.bashrc<br />
    echo 'export TAU_MAKEFILE=&lt;directorio_instalaci&oacute;n&gt;/tau-x.xx.x/&lt;arquitectura&gt;/lib/Makefile.tau-mpi-pdt-openmp-profile-trace-mpitrace' &gt;&gt; ~/.bashrc</div> <p>Ojo: Es importante que se escriba con comillas simples, en caso de comillas dobles no funcionara correctamente, y posteriormente abras de nuevo el terminal para que cargue el fichero .bashrc</p></div><h1 id="uso" >Uso de TAU</h1><div class="contenido"><p>1.Ejecutamos el script de compilaci&oacute;n de TAU para compilar el programa.<br />
      </p> <div class="consola">tau_cxx.sh mergesort.cpp -o programa</div> <p>En caso de que de el error “tau_cxx.sh: orden no encontrada” significa que no agregaron bien los directorios al PATH vuelve a revisar el paso 11.<br />
<br />
      2. Ejecutamos el programa paralelo con el comando normal como deseemos, por ejemplo el siguiente.<br />
      </p> <div class="consola">mpirun -np 4 programa</div> <p>3. Ejecutamos la herramienta de recopilaci&oacute;n de c&oacute;digo de tau.<br />
      </p> <div class="consola">tau_treemerge.pl</div> <p>4. Tras generarnos los ficheros de salida despu&eacute;s de la ejecuci&oacute;n normal, unificamos la salida en un &uacute;nico fichero.<br />
      </p> <div class="consola">tau2slog2 tau.trc tau.edf -o tau.slog2</div> <p>5. Abrimos el fichero de salida con la herramienta de visualizaci&oacute;n por defecto.<br />
      </p> <div class="consola">jumpshot tau.slog2</div> </div><h1 id="nodivinterfaz" >Interfaz</h1> <img alt="Captura de la interfaz jumpshot" src="datos/imagenes_tau/tau.jpg" />  <ul><li>Leyenda → La leyenda nos indica los distintos eventos que registra TAU sobre las funciones de <span class="funcion"><a href="mpi_ayuda.php.html">MPI</a></span>.</li><li>Procesos → Indica el numero de procesos que se han ejecutado.</li><li>Linea temporal → Linea de tiempo que representa el tiempo transcurrido en el proceso de ejecuci&oacute;n.</li><li>Funciones <span class="funcion"><a href="mpi_ayuda.php.html">MPI</a></span> ejecutadas por tiempo y proceso. → Representa con los colores indicados en la leyenda las acciones realizadas por cada procesos durante toda la ejecuci&oacute;n.</li></ul> </div><div id="creadoresWeb">
					<span> Creado por: Daniel Guerrero Mart&iacute;nez y Sergio Rodr&iacute;guez Lumley 2010</span>
			      <p><a target="_blank" href="http://validator.w3.org/check?uri=referer"><img
				      src="http://www.w3.org/Icons/valid-html401"
				      alt="Valid HTML 4.01 Transitional" height="31" width="88"></a>
				</p>
				</div>
			</body>
		</html>

